{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useEffect } from 'react';\nimport axios from 'axios';\nexport const useAuth = () => {\n  _s();\n  const [state, setState] = useState({\n    user: null,\n    token: localStorage.getItem('token'),\n    isAuthenticated: false,\n    loading: true,\n    error: null\n  });\n  useEffect(() => {\n    const checkAuth = async () => {\n      if (state.token) {\n        try {\n          const response = await axios.get('http://localhost:3000/users/me', {\n            headers: {\n              Authorization: `Bearer ${state.token}`\n            }\n          });\n          setState(prev => ({\n            ...prev,\n            user: response.data,\n            isAuthenticated: true,\n            loading: false\n          }));\n        } catch (error) {\n          setState(prev => ({\n            ...prev,\n            user: null,\n            token: null,\n            isAuthenticated: false,\n            loading: false,\n            error: 'Помилка автентифікації'\n          }));\n        }\n      } else {\n        setState(prev => ({\n          ...prev,\n          loading: false\n        }));\n      }\n    };\n    checkAuth();\n  }, [state.token]);\n  const login = async (email, password) => {\n    try {\n      const response = await axios.post('http://localhost:3000/auth/login', {\n        email,\n        password\n      });\n      const {\n        token,\n        user\n      } = response.data;\n      localStorage.setItem('token', token);\n      setState({\n        user,\n        token,\n        isAuthenticated: true,\n        loading: false,\n        error: null\n      });\n      return true;\n    } catch (error) {\n      setState(prev => ({\n        ...prev,\n        error: 'Помилка входу'\n      }));\n      return false;\n    }\n  };\n  const logout = () => {\n    localStorage.removeItem('token');\n    setState({\n      user: null,\n      token: null,\n      isAuthenticated: false,\n      loading: false,\n      error: null\n    });\n  };\n  return {\n    ...state,\n    login,\n    logout\n  };\n};\n_s(useAuth, \"VITNW6y0XDDF+yczbQrh1Joh1uk=\");","map":{"version":3,"names":["useState","useEffect","axios","useAuth","_s","state","setState","user","token","localStorage","getItem","isAuthenticated","loading","error","checkAuth","response","get","headers","Authorization","prev","data","login","email","password","post","setItem","logout","removeItem"],"sources":["C:/Users/David/try/pet-adoption-platform/frontend/src/hooks/useAuth.ts"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport axios from 'axios';\n\ninterface User {\n  id: string;\n  name: string;\n  email: string;\n  phone?: string;\n}\n\ninterface AuthState {\n  user: User | null;\n  token: string | null;\n  isAuthenticated: boolean;\n  loading: boolean;\n  error: string | null;\n}\n\nexport const useAuth = () => {\n  const [state, setState] = useState<AuthState>({\n    user: null,\n    token: localStorage.getItem('token'),\n    isAuthenticated: false,\n    loading: true,\n    error: null\n  });\n\n  useEffect(() => {\n    const checkAuth = async () => {\n      if (state.token) {\n        try {\n          const response = await axios.get('http://localhost:3000/users/me', {\n            headers: { Authorization: `Bearer ${state.token}` }\n          });\n          setState(prev => ({\n            ...prev,\n            user: response.data,\n            isAuthenticated: true,\n            loading: false\n          }));\n        } catch (error) {\n          setState(prev => ({\n            ...prev,\n            user: null,\n            token: null,\n            isAuthenticated: false,\n            loading: false,\n            error: 'Помилка автентифікації'\n          }));\n        }\n      } else {\n        setState(prev => ({ ...prev, loading: false }));\n      }\n    };\n\n    checkAuth();\n  }, [state.token]);\n\n  const login = async (email: string, password: string) => {\n    try {\n      const response = await axios.post('http://localhost:3000/auth/login', {\n        email,\n        password\n      });\n      \n      const { token, user } = response.data;\n      localStorage.setItem('token', token);\n      \n      setState({\n        user,\n        token,\n        isAuthenticated: true,\n        loading: false,\n        error: null\n      });\n      \n      return true;\n    } catch (error) {\n      setState(prev => ({\n        ...prev,\n        error: 'Помилка входу'\n      }));\n      return false;\n    }\n  };\n\n  const logout = () => {\n    localStorage.removeItem('token');\n    setState({\n      user: null,\n      token: null,\n      isAuthenticated: false,\n      loading: false,\n      error: null\n    });\n  };\n\n  return {\n    ...state,\n    login,\n    logout\n  };\n}; "],"mappings":";AAAA,SAASA,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAC3C,OAAOC,KAAK,MAAM,OAAO;AAiBzB,OAAO,MAAMC,OAAO,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAC3B,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAGN,QAAQ,CAAY;IAC5CO,IAAI,EAAE,IAAI;IACVC,KAAK,EAAEC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;IACpCC,eAAe,EAAE,KAAK;IACtBC,OAAO,EAAE,IAAI;IACbC,KAAK,EAAE;EACT,CAAC,CAAC;EAEFZ,SAAS,CAAC,MAAM;IACd,MAAMa,SAAS,GAAG,MAAAA,CAAA,KAAY;MAC5B,IAAIT,KAAK,CAACG,KAAK,EAAE;QACf,IAAI;UACF,MAAMO,QAAQ,GAAG,MAAMb,KAAK,CAACc,GAAG,CAAC,gCAAgC,EAAE;YACjEC,OAAO,EAAE;cAAEC,aAAa,EAAE,UAAUb,KAAK,CAACG,KAAK;YAAG;UACpD,CAAC,CAAC;UACFF,QAAQ,CAACa,IAAI,KAAK;YAChB,GAAGA,IAAI;YACPZ,IAAI,EAAEQ,QAAQ,CAACK,IAAI;YACnBT,eAAe,EAAE,IAAI;YACrBC,OAAO,EAAE;UACX,CAAC,CAAC,CAAC;QACL,CAAC,CAAC,OAAOC,KAAK,EAAE;UACdP,QAAQ,CAACa,IAAI,KAAK;YAChB,GAAGA,IAAI;YACPZ,IAAI,EAAE,IAAI;YACVC,KAAK,EAAE,IAAI;YACXG,eAAe,EAAE,KAAK;YACtBC,OAAO,EAAE,KAAK;YACdC,KAAK,EAAE;UACT,CAAC,CAAC,CAAC;QACL;MACF,CAAC,MAAM;QACLP,QAAQ,CAACa,IAAI,KAAK;UAAE,GAAGA,IAAI;UAAEP,OAAO,EAAE;QAAM,CAAC,CAAC,CAAC;MACjD;IACF,CAAC;IAEDE,SAAS,CAAC,CAAC;EACb,CAAC,EAAE,CAACT,KAAK,CAACG,KAAK,CAAC,CAAC;EAEjB,MAAMa,KAAK,GAAG,MAAAA,CAAOC,KAAa,EAAEC,QAAgB,KAAK;IACvD,IAAI;MACF,MAAMR,QAAQ,GAAG,MAAMb,KAAK,CAACsB,IAAI,CAAC,kCAAkC,EAAE;QACpEF,KAAK;QACLC;MACF,CAAC,CAAC;MAEF,MAAM;QAAEf,KAAK;QAAED;MAAK,CAAC,GAAGQ,QAAQ,CAACK,IAAI;MACrCX,YAAY,CAACgB,OAAO,CAAC,OAAO,EAAEjB,KAAK,CAAC;MAEpCF,QAAQ,CAAC;QACPC,IAAI;QACJC,KAAK;QACLG,eAAe,EAAE,IAAI;QACrBC,OAAO,EAAE,KAAK;QACdC,KAAK,EAAE;MACT,CAAC,CAAC;MAEF,OAAO,IAAI;IACb,CAAC,CAAC,OAAOA,KAAK,EAAE;MACdP,QAAQ,CAACa,IAAI,KAAK;QAChB,GAAGA,IAAI;QACPN,KAAK,EAAE;MACT,CAAC,CAAC,CAAC;MACH,OAAO,KAAK;IACd;EACF,CAAC;EAED,MAAMa,MAAM,GAAGA,CAAA,KAAM;IACnBjB,YAAY,CAACkB,UAAU,CAAC,OAAO,CAAC;IAChCrB,QAAQ,CAAC;MACPC,IAAI,EAAE,IAAI;MACVC,KAAK,EAAE,IAAI;MACXG,eAAe,EAAE,KAAK;MACtBC,OAAO,EAAE,KAAK;MACdC,KAAK,EAAE;IACT,CAAC,CAAC;EACJ,CAAC;EAED,OAAO;IACL,GAAGR,KAAK;IACRgB,KAAK;IACLK;EACF,CAAC;AACH,CAAC;AAACtB,EAAA,CApFWD,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}