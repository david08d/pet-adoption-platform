{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useEffect } from 'react';\nimport axios from 'axios';\nexport const useAuth = () => {\n  _s();\n  const [state, setState] = useState({\n    user: null,\n    token: localStorage.getItem('token'),\n    isAuthenticated: false,\n    isLoading: true,\n    error: null\n  });\n  useEffect(() => {\n    const token = localStorage.getItem('token');\n    if (token) {\n      axios.defaults.headers.common['Authorization'] = `Bearer ${token}`;\n    }\n    setState(prev => ({\n      ...prev,\n      isLoading: false\n    }));\n  }, []);\n  const login = async (email, password) => {\n    try {\n      setState(prev => ({\n        ...prev,\n        isLoading: true,\n        error: null\n      }));\n      const response = await axios.post('http://localhost:3000/auth/login', {\n        email,\n        password\n      });\n      const {\n        token,\n        user\n      } = response.data;\n      localStorage.setItem('token', token);\n      axios.defaults.headers.common['Authorization'] = `Bearer ${token}`;\n      setState({\n        user,\n        token,\n        isAuthenticated: true,\n        isLoading: false,\n        error: null\n      });\n      return true;\n    } catch (error) {\n      setState(prev => {\n        var _error$response, _error$response$data;\n        return {\n          ...prev,\n          isLoading: false,\n          error: ((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message) || 'Помилка входу'\n        };\n      });\n      throw error;\n    }\n  };\n  const logout = () => {\n    localStorage.removeItem('token');\n    delete axios.defaults.headers.common['Authorization'];\n    setState({\n      user: null,\n      token: null,\n      isAuthenticated: false,\n      isLoading: false,\n      error: null\n    });\n  };\n  return {\n    ...state,\n    login,\n    logout\n  };\n};\n_s(useAuth, \"VOpoUY1tMrCTnpqOwaM66Ledv+I=\");","map":{"version":3,"names":["useState","useEffect","axios","useAuth","_s","state","setState","user","token","localStorage","getItem","isAuthenticated","isLoading","error","defaults","headers","common","prev","login","email","password","response","post","data","setItem","_error$response","_error$response$data","message","logout","removeItem"],"sources":["C:/Users/David/try/pet-adoption-platform/frontend/src/hooks/useAuth.ts"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport axios from 'axios';\n\ninterface User {\n  id: string;\n  name: string;\n  email: string;\n  phone?: string;\n  role: string;\n}\n\ninterface AuthState {\n  user: User | null;\n  token: string | null;\n  isAuthenticated: boolean;\n  isLoading: boolean;\n  error: string | null;\n}\n\nexport const useAuth = () => {\n  const [state, setState] = useState<AuthState>({\n    user: null,\n    token: localStorage.getItem('token'),\n    isAuthenticated: false,\n    isLoading: true,\n    error: null,\n  });\n\n  useEffect(() => {\n    const token = localStorage.getItem('token');\n    if (token) {\n      axios.defaults.headers.common['Authorization'] = `Bearer ${token}`;\n    }\n    setState(prev => ({ ...prev, isLoading: false }));\n  }, []);\n\n  const login = async (email: string, password: string) => {\n    try {\n      setState(prev => ({ ...prev, isLoading: true, error: null }));\n      const response = await axios.post('http://localhost:3000/auth/login', {\n        email,\n        password,\n      });\n\n      const { token, user } = response.data;\n      localStorage.setItem('token', token);\n      axios.defaults.headers.common['Authorization'] = `Bearer ${token}`;\n\n      setState({\n        user,\n        token,\n        isAuthenticated: true,\n        isLoading: false,\n        error: null,\n      });\n\n      return true;\n    } catch (error: any) {\n      setState(prev => ({\n        ...prev,\n        isLoading: false,\n        error: error.response?.data?.message || 'Помилка входу',\n      }));\n      throw error;\n    }\n  };\n\n  const logout = () => {\n    localStorage.removeItem('token');\n    delete axios.defaults.headers.common['Authorization'];\n    setState({\n      user: null,\n      token: null,\n      isAuthenticated: false,\n      isLoading: false,\n      error: null,\n    });\n  };\n\n  return {\n    ...state,\n    login,\n    logout,\n  };\n}; "],"mappings":";AAAA,SAASA,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAC3C,OAAOC,KAAK,MAAM,OAAO;AAkBzB,OAAO,MAAMC,OAAO,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAC3B,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAGN,QAAQ,CAAY;IAC5CO,IAAI,EAAE,IAAI;IACVC,KAAK,EAAEC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;IACpCC,eAAe,EAAE,KAAK;IACtBC,SAAS,EAAE,IAAI;IACfC,KAAK,EAAE;EACT,CAAC,CAAC;EAEFZ,SAAS,CAAC,MAAM;IACd,MAAMO,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;IAC3C,IAAIF,KAAK,EAAE;MACTN,KAAK,CAACY,QAAQ,CAACC,OAAO,CAACC,MAAM,CAAC,eAAe,CAAC,GAAG,UAAUR,KAAK,EAAE;IACpE;IACAF,QAAQ,CAACW,IAAI,KAAK;MAAE,GAAGA,IAAI;MAAEL,SAAS,EAAE;IAAM,CAAC,CAAC,CAAC;EACnD,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMM,KAAK,GAAG,MAAAA,CAAOC,KAAa,EAAEC,QAAgB,KAAK;IACvD,IAAI;MACFd,QAAQ,CAACW,IAAI,KAAK;QAAE,GAAGA,IAAI;QAAEL,SAAS,EAAE,IAAI;QAAEC,KAAK,EAAE;MAAK,CAAC,CAAC,CAAC;MAC7D,MAAMQ,QAAQ,GAAG,MAAMnB,KAAK,CAACoB,IAAI,CAAC,kCAAkC,EAAE;QACpEH,KAAK;QACLC;MACF,CAAC,CAAC;MAEF,MAAM;QAAEZ,KAAK;QAAED;MAAK,CAAC,GAAGc,QAAQ,CAACE,IAAI;MACrCd,YAAY,CAACe,OAAO,CAAC,OAAO,EAAEhB,KAAK,CAAC;MACpCN,KAAK,CAACY,QAAQ,CAACC,OAAO,CAACC,MAAM,CAAC,eAAe,CAAC,GAAG,UAAUR,KAAK,EAAE;MAElEF,QAAQ,CAAC;QACPC,IAAI;QACJC,KAAK;QACLG,eAAe,EAAE,IAAI;QACrBC,SAAS,EAAE,KAAK;QAChBC,KAAK,EAAE;MACT,CAAC,CAAC;MAEF,OAAO,IAAI;IACb,CAAC,CAAC,OAAOA,KAAU,EAAE;MACnBP,QAAQ,CAACW,IAAI;QAAA,IAAAQ,eAAA,EAAAC,oBAAA;QAAA,OAAK;UAChB,GAAGT,IAAI;UACPL,SAAS,EAAE,KAAK;UAChBC,KAAK,EAAE,EAAAY,eAAA,GAAAZ,KAAK,CAACQ,QAAQ,cAAAI,eAAA,wBAAAC,oBAAA,GAAdD,eAAA,CAAgBF,IAAI,cAAAG,oBAAA,uBAApBA,oBAAA,CAAsBC,OAAO,KAAI;QAC1C,CAAC;MAAA,CAAC,CAAC;MACH,MAAMd,KAAK;IACb;EACF,CAAC;EAED,MAAMe,MAAM,GAAGA,CAAA,KAAM;IACnBnB,YAAY,CAACoB,UAAU,CAAC,OAAO,CAAC;IAChC,OAAO3B,KAAK,CAACY,QAAQ,CAACC,OAAO,CAACC,MAAM,CAAC,eAAe,CAAC;IACrDV,QAAQ,CAAC;MACPC,IAAI,EAAE,IAAI;MACVC,KAAK,EAAE,IAAI;MACXG,eAAe,EAAE,KAAK;MACtBC,SAAS,EAAE,KAAK;MAChBC,KAAK,EAAE;IACT,CAAC,CAAC;EACJ,CAAC;EAED,OAAO;IACL,GAAGR,KAAK;IACRa,KAAK;IACLU;EACF,CAAC;AACH,CAAC;AAACxB,EAAA,CAjEWD,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}